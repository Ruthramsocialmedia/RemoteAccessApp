<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Login — Remote Access Dashboard</title>
    <link rel="stylesheet" href="/css/hacker-theme.css">
    <style>
        body {
            display: flex;
            align-items: center;
            justify-content: center;
            min-height: 100vh;
            margin: 0;
            background: #0a0a0f;
        }

        .login-container {
            width: 100%;
            max-width: 420px;
            padding: 20px;
        }

        .login-card {
            background: rgba(15, 15, 25, 0.95);
            border: 1px solid rgba(0, 255, 65, 0.15);
            border-radius: 16px;
            padding: 40px 36px;
            box-shadow:
                0 0 40px rgba(0, 255, 65, 0.05),
                0 20px 60px rgba(0, 0, 0, 0.5);
            backdrop-filter: blur(20px);
        }

        .login-header {
            text-align: center;
            margin-bottom: 36px;
        }

        .login-header .lock-icon {
            font-size: 48px;
            margin-bottom: 16px;
            display: block;
            filter: drop-shadow(0 0 12px rgba(0, 255, 65, 0.4));
        }

        .login-header h1 {
            font-size: 22px;
            color: #00ff41;
            margin: 0 0 6px 0;
            font-family: 'Courier New', monospace;
            letter-spacing: 2px;
            text-transform: uppercase;
        }

        .login-header p {
            font-size: 13px;
            color: #666;
            margin: 0;
            font-family: 'Courier New', monospace;
        }

        .form-group {
            margin-bottom: 20px;
        }

        .form-group label {
            display: block;
            font-size: 12px;
            color: #00ff41;
            margin-bottom: 8px;
            font-family: 'Courier New', monospace;
            letter-spacing: 1px;
            text-transform: uppercase;
        }

        .form-group input {
            width: 100%;
            padding: 12px 16px;
            background: rgba(0, 255, 65, 0.05);
            border: 1px solid rgba(0, 255, 65, 0.2);
            border-radius: 8px;
            color: #e0e0e0;
            font-size: 15px;
            font-family: 'Courier New', monospace;
            outline: none;
            transition: all 0.3s ease;
            box-sizing: border-box;
        }

        .form-group input:focus {
            border-color: #00ff41;
            box-shadow: 0 0 16px rgba(0, 255, 65, 0.15);
            background: rgba(0, 255, 65, 0.08);
        }

        .form-group input::placeholder {
            color: #444;
        }

        .login-btn {
            width: 100%;
            padding: 14px;
            background: linear-gradient(135deg, #00ff41, #00cc33);
            color: #0a0a0f;
            border: none;
            border-radius: 8px;
            font-size: 14px;
            font-weight: 700;
            font-family: 'Courier New', monospace;
            letter-spacing: 2px;
            text-transform: uppercase;
            cursor: pointer;
            transition: all 0.3s ease;
            margin-top: 8px;
        }

        .login-btn:hover {
            background: linear-gradient(135deg, #33ff66, #00ff41);
            box-shadow: 0 0 24px rgba(0, 255, 65, 0.3);
            transform: translateY(-1px);
        }

        .login-btn:active {
            transform: translateY(0);
        }

        .login-btn:disabled {
            opacity: 0.5;
            cursor: not-allowed;
            transform: none;
        }

        .error-msg {
            background: rgba(239, 68, 68, 0.1);
            border: 1px solid rgba(239, 68, 68, 0.3);
            color: #ef4444;
            padding: 10px 14px;
            border-radius: 8px;
            font-size: 13px;
            font-family: 'Courier New', monospace;
            margin-bottom: 20px;
            display: none;
            text-align: center;
        }

        .error-msg.visible {
            display: block;
            animation: shake 0.4s ease;
        }

        @keyframes shake {
            0%, 100% { transform: translateX(0); }
            25% { transform: translateX(-8px); }
            75% { transform: translateX(8px); }
        }

        .terminal-line {
            font-family: 'Courier New', monospace;
            font-size: 11px;
            color: #333;
            text-align: center;
            margin-top: 24px;
            letter-spacing: 1px;
        }

        .terminal-line span {
            color: #00ff41;
        }
    </style>
</head>

<body>
    <div class="login-container">
        <div class="login-card">
            <div class="login-header">
                <span class="lock-icon">🔒</span>
                <h1>Access Terminal</h1>
                <p>authentication required</p>
            </div>

            <div class="error-msg" id="error-msg"></div>

            <form id="login-form" onsubmit="handleLogin(event)">
                <div class="form-group">
                    <label for="username">Username</label>
                    <input type="text" id="username" name="username" placeholder="enter username" autocomplete="username" required autofocus>
                </div>

                <div class="form-group">
                    <label for="password">Password</label>
                    <input type="password" id="password" name="password" placeholder="enter password" autocomplete="current-password" required>
                </div>

                <button type="submit" class="login-btn" id="login-btn">
                    Authenticate
                </button>
            </form>

            <div class="terminal-line">
                <span>▶</span> remote_access_gateway v1.0
            </div>
        </div>
    </div>

    <script>
        // Check if already authenticated
        (async () => {
            try {
                const res = await fetch('/auth/check', { credentials: 'same-origin' });
                if (res.ok) {
                    window.location.href = '/';
                }
            } catch (e) { /* not authenticated */ }
        })();

        async function handleLogin(e) {
            e.preventDefault();

            const btn = document.getElementById('login-btn');
            const errorEl = document.getElementById('error-msg');
            const username = document.getElementById('username').value.trim();
            const password = document.getElementById('password').value;

            // Reset error
            errorEl.classList.remove('visible');

            // Disable button
            btn.disabled = true;
            btn.textContent = 'Authenticating...';

            try {
                const res = await fetch('/auth/login', {
                    method: 'POST',
                    headers: { 'Content-Type': 'application/json' },
                    credentials: 'same-origin',
                    body: JSON.stringify({ username, password }),
                });

                const data = await res.json();

                if (res.ok && data.success) {
                    btn.textContent = 'Access Granted ✓';
                    btn.style.background = '#10b981';
                    setTimeout(() => {
                        window.location.href = '/';
                    }, 500);
                } else {
                    errorEl.textContent = data.error || 'Authentication failed';
                    errorEl.classList.add('visible');
                    btn.disabled = false;
                    btn.textContent = 'Authenticate';
                }
            } catch (error) {
                errorEl.textContent = 'Connection error — server unreachable';
                errorEl.classList.add('visible');
                btn.disabled = false;
                btn.textContent = 'Authenticate';
            }
        }
    </script>

  <!-- Disclaimer -->
  <div class="container">
    <div class="disclaimer">
      <h4>&#x26A0;&#xFE0F; Disclaimer</h4>
      <p>This application is intended for EDUCATIONAL AND PERSONAL USE ONLY. It is designed for users to remotely manage their own devices. Installing or using this application on a device without the owner's explicit consent is illegal and unethical. The developers assume no liability for misuse. By using this application, you agree that you are solely responsible for how it is used.</p>
    </div>
  </div>

  <!-- Footer -->
  <footer class="site-footer">
    <p class="footer-created">Created by</p>
    <a href="https://thiyoplus-f.netlify.app/" target="_blank" class="footer-brand">thiyo-de</a>
    <p class="footer-copy">&copy; 2025 All Rights Reserved</p>
  </footer>
</body>

</html>
